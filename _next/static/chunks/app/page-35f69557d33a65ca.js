(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1135:(e,t,s)=>{Promise.resolve().then(s.bind(s,37391))},37391:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ec});var r=s(95155),a=s(12115),l=s(57434),n=s(53904),i=s(29869),o=s(52596),c=s(39688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});u.displayName="Card";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...a})});h.displayName="CardHeader";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...a})});m.displayName="CardTitle";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",s),...a})});x.displayName="CardDescription";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("p-6 pt-0",s),...a})});f.displayName="CardContent";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...a})});g.displayName="CardFooter";var j=s(54624);let p=(0,s(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:n=!1,...i}=e,o=n?j.DX:"button";return(0,r.jsx)(o,{className:d(p({variant:a,size:l,className:s})),ref:t,...i})});function y(e){let{onFileUpload:t,hasData:s}=e,[o,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),g=(0,a.useCallback)(async e=>{if("text/csv"!==e.type&&!e.name.endsWith(".csv")){alert("Please upload a CSV file");return}h(!0),x(e.name);try{let s=(await e.text()).split("\n").filter(e=>e.trim());if(0===s.length){alert("No data found in the CSV file"),h(!1);return}let r=s[0].split(",").map(e=>e.trim().replace(/"/g,"")),a=[];for(let e=1;e<s.length;e++){let t=s[e].split(",").map(e=>e.trim().replace(/"/g,"")),l={};r.forEach((e,s)=>{l[e]=t[s]||""}),a.push(l)}console.log("CSV parsed successfully:",a.length,"rows"),console.log("Headers found:",r),console.log("Sample row:",a[0]),t(a)}catch(e){console.error("Error processing CSV file:",e),alert("Error processing the CSV file. Please check the file format.")}finally{h(!1)}},[t]),j=(0,a.useCallback)(e=>{e.preventDefault(),c(!1);let t=e.dataTransfer.files[0];t&&g(t)},[g]),p=(0,a.useCallback)(e=>{e.preventDefault(),c(!0)},[]),y=(0,a.useCallback)(e=>{e.preventDefault(),c(!1)},[]),b=(0,a.useCallback)(e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&g(s)},[g]);return s&&!d?(0,r.jsx)(u,{className:"mb-6 transition-all duration-500 ease-in-out transform scale-95",children:(0,r.jsxs)(f,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:m||"CSV File Loaded"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Data analysis complete"})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(v,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=document.getElementById("csvFile"))||void 0===e?void 0:e.click()},className:"text-xs",children:[(0,r.jsx)(n.A,{className:"mr-1 h-3 w-3"}),"Replace"]})})]}),(0,r.jsx)("input",{id:"csvFile",type:"file",accept:".csv",className:"hidden",onChange:b})]})}):(0,r.jsx)(u,{className:"mb-8 transition-all duration-500 ease-in-out",children:(0,r.jsx)(f,{className:"p-0",children:(0,r.jsxs)("div",{className:"\n            border-2 border-dashed rounded-lg p-8 text-center transition-all duration-300 cursor-pointer\n            ".concat(o?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50","\n            ").concat(d?"opacity-50 pointer-events-none":"","\n          "),onDrop:j,onDragOver:p,onDragLeave:y,onClick:()=>{var e;return!d&&(null===(e=document.getElementById("csvFile"))||void 0===e?void 0:e.click())},children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[d?(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}):(0,r.jsx)(i.A,{className:"h-12 w-12 text-muted-foreground"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:d?"Processing CSV...":"Upload CSV File"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Drag and drop your ticket data CSV file here, or click to select"})]}),!d&&(0,r.jsxs)(v,{variant:"outline",children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Select File"]})]}),(0,r.jsx)("input",{id:"csvFile",type:"file",accept:".csv",className:"hidden",onChange:b})]})})})}v.displayName="Button";var b=s(33109),N=s(69074),k=s(72713),w=s(14186);function C(e){let{ytdTotal:t,monthlyAvg:s,weeklyAvg:a,avgResolutionTime:l}=e,n=[{title:"YTD Total",value:t.toLocaleString(),icon:b.A,color:"text-blue-600"},{title:"Monthly Average",value:s.toFixed(1),icon:N.A,color:"text-green-600"},{title:"Weekly Average",value:a.toFixed(1),icon:k.A,color:"text-purple-600"},{title:"Avg Resolution Time",value:"".concat(l.toFixed(1),"h"),icon:w.A,color:"text-orange-600"}];return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:n.map((e,t)=>{let s=e.icon;return(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(m,{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,r.jsx)(s,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(f,{children:(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(e.color),children:e.value})})]},t)})})}var D=s(8782),S=s(34e3),T=s(60379),F=s(83540),R=s(94517),_=s(24026);let M={light:"",dark:".dark"},A=a.createContext(null);function H(){let e=a.useContext(A);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let L=a.forwardRef((e,t)=>{let{id:s,className:l,children:n,config:i,...o}=e,c=a.useId(),u="chart-".concat(s||c.replace(/:/g,""));return(0,r.jsx)(A.Provider,{value:{config:i},children:(0,r.jsxs)("div",{"data-chart":u,ref:t,className:d("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,r.jsx)(O,{id:u,config:i}),(0,r.jsx)(F.u,{children:n})]})})});L.displayName="Chart";let O=e=>{let{id:t,config:s}=e,a=Object.entries(s).filter(e=>{let[t,s]=e;return s.theme||s.color});return a.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(M).map(e=>{let[s,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[r,a]=e,l=(null===(t=a.theme)||void 0===t?void 0:t[s])||a.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},P=R.m,B=a.forwardRef((e,t)=>{let{active:s,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:u,labelFormatter:h,labelClassName:m,formatter:x,color:f,nameKey:g,labelKey:j}=e,{config:p}=H(),v=a.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[t]=l,s="".concat(j||t.dataKey||t.name||"value"),a=V(p,t,s),n=j||"string"!=typeof u?null==a?void 0:a.label:(null===(e=p[u])||void 0===e?void 0:e.label)||u;return h?(0,r.jsx)("div",{className:d("font-medium",m),children:h(n,l)}):n?(0,r.jsx)("div",{className:d("font-medium",m),children:n}):null},[u,h,l,o,m,p,j]);if(!s||!(null==l?void 0:l.length))return null;let y=1===l.length&&"dot"!==i;return(0,r.jsxs)("div",{ref:t,className:d("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[y?null:v,(0,r.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let s="".concat(g||e.name||e.dataKey||"value"),a=V(p,e,s),l=f||e.payload.fill||e.color;return(0,r.jsx)("div",{className:d("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==a?void 0:a.icon)?(0,r.jsx)(a.icon,{}):!c&&(0,r.jsx)("div",{className:d("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":y&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:d("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[y?v:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});B.displayName="ChartTooltip";let W=_.s,E=a.forwardRef((e,t)=>{let{className:s,hideIcon:a=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=H();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:t,className:d("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",s),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),s=V(o,e,t);return(0,r.jsxs)("div",{className:d("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!a?(0,r.jsx)(s.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null});function V(e,t,s){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=s;return s in t&&"string"==typeof t[s]?a=t[s]:r&&s in r&&"string"==typeof r[s]&&(a=r[s]),a in e?e[a]:e[s]}E.displayName="ChartLegend";let K={tickets:{label:"Tickets"},"Front Half Days":{label:"Front Half Days",color:"hsl(var(--chart-1))"},"Front Half Nights":{label:"Front Half Nights",color:"hsl(var(--chart-2))"},"Back Half Days":{label:"Back Half Days",color:"hsl(var(--chart-3))"},"Back Half Nights":{label:"Back Half Nights",color:"hsl(var(--chart-4))"},"Wednesday Days":{label:"Wednesday Days",color:"hsl(var(--chart-5))"},"Wednesday Nights":{label:"Wednesday Nights",color:"hsl(220 70% 50%)"}},z={"Front Half Days":"hsl(var(--chart-1))","Front Half Nights":"hsl(var(--chart-2))","Back Half Days":"hsl(var(--chart-3))","Back Half Nights":"hsl(var(--chart-4))","Wednesday Days":"hsl(var(--chart-5))","Wednesday Nights":"hsl(220 70% 50%)"};function U(e){let{analysisResult:t}=e,[s,l]=a.useState("6mo"),n=Object.entries((()=>{switch(s){case"1mo":return t.last1MonthShiftCounts;case"3mo":return t.last3MonthsShiftCounts;case"6mo":default:return t.last6MonthsShiftCounts;case"all":return t.shiftCounts}})()).sort((e,t)=>{let[,s]=e,[,r]=t;return r-s}).map(e=>{let[t,s]=e;return{shift:t,tickets:s,fill:z[t]||"hsl(var(--chart-1))",percentage:0}}),i=a.useMemo(()=>n.reduce((e,t)=>e+t.tickets,0),[n]);return(n.forEach(e=>{e.percentage=i>0?e.tickets/i*100:0}),0===i)?(0,r.jsxs)(u,{className:"flex flex-col",children:[(0,r.jsxs)(h,{className:"items-center pb-0",children:[(0,r.jsx)(m,{children:"Shift Distribution"}),(0,r.jsx)(x,{children:"Upload data to see shift distribution"})]}),(0,r.jsx)(f,{className:"flex-1 pb-0",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-[350px] text-muted-foreground",children:"No data available"})})]}):(0,r.jsxs)(u,{className:"flex flex-col",children:[(0,r.jsxs)(h,{className:"items-center pb-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between w-full mb-2",children:[(0,r.jsx)(m,{children:"Shift Distribution"}),(0,r.jsx)("div",{className:"flex gap-1",children:["1mo","3mo","6mo","all"].map(e=>(0,r.jsx)(v,{variant:s===e?"default":"outline",size:"sm",onClick:()=>l(e),className:"text-xs px-2 py-1",children:"all"===e?"All":e},e))})]}),(0,r.jsxs)(x,{children:["Ticket distribution across shifts - ",(()=>{switch(s){case"1mo":return"Previous full month";case"3mo":return"Previous 3 months";case"6mo":default:return"Previous 6 months";case"all":return"All time"}})()]})]}),(0,r.jsx)(f,{className:"flex-1 pb-0",children:(0,r.jsx)(L,{config:K,className:"mx-auto aspect-square max-h-[350px]",children:(0,r.jsxs)(D.r,{children:[(0,r.jsx)(P,{cursor:!1,content:e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsx)("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:e.fill}}),(0,r.jsx)("span",{className:"font-medium",children:e.shift})]}),(0,r.jsxs)("div",{className:"grid gap-1 text-sm",children:[(0,r.jsxs)("div",{children:["Tickets: ",e.tickets.toLocaleString()]}),(0,r.jsxs)("div",{children:["Percentage: ",e.percentage.toFixed(1),"%"]})]})]})})}}}),(0,r.jsx)(S.F,{data:n,dataKey:"tickets",nameKey:"shift",innerRadius:80,outerRadius:140,strokeWidth:2,children:(0,r.jsx)(T.J,{content:e=>{let{viewBox:t}=e;if(t&&"cx"in t&&"cy"in t)return(0,r.jsxs)("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",children:[(0,r.jsx)("tspan",{x:t.cx,y:t.cy,className:"fill-foreground text-3xl font-bold",children:i.toLocaleString()}),(0,r.jsx)("tspan",{x:t.cx,y:(t.cy||0)+24,className:"fill-muted-foreground",children:"Total Tickets"})]})}})}),(0,r.jsx)(W,{content:(0,r.jsx)(E,{}),className:"flex-wrap gap-2 text-sm mt-4"})]})})})]})}var Y=s(68500),I=s(3401),q=s(94754),J=s(96025),Q=s(16238),X=s(83394),Z=s(36079);let $={tickets:{label:"Tickets",color:"hsl(var(--chart-1))"}};function G(e){let{analysisResult:t}=e,s=["2024-12","2025-01","2025-02","2025-03","2025-04","2025-05"].map(e=>({month:new Date(e+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),tickets:t.monthlyTickets[e]||0}));if(0===s.length)return(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(m,{children:"Monthly Breakdown"}),(0,r.jsx)(x,{children:"Upload data to see monthly trends"})]}),(0,r.jsx)(f,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-[250px] text-muted-foreground",children:"No data available"})})]});let a=t.last6MonthsCount,l=t.avgMonthly,n=t.trendPercentage,i=t.projectedCurrentMonth,o=n>0,c=o?b.A:Y.A,d=o?"text-red-600":"text-green-600";return(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(m,{children:"Monthly Breakdown"}),(0,r.jsx)(x,{children:"Previous 6 months ticket volume"})]}),(0,r.jsx)(f,{children:(0,r.jsx)(L,{config:$,children:(0,r.jsxs)(I.E,{accessibilityLayer:!0,data:s,margin:{left:12,right:12,top:20},children:[(0,r.jsx)(q.d,{vertical:!1}),(0,r.jsx)(J.W,{dataKey:"month",tickLine:!1,tickMargin:10,axisLine:!1}),(0,r.jsx)(Q.h,{}),(0,r.jsx)(P,{content:(0,r.jsx)(B,{}),formatter:(e,t)=>[e,"Tickets"]}),(0,r.jsx)(X.y,{dataKey:"tickets",fill:"var(--color-tickets)",radius:[4,4,0,0],children:(0,r.jsx)(Z.Z,{dataKey:"tickets",position:"top",className:"fill-foreground text-xs font-medium"})})]})})}),(0,r.jsxs)(g,{className:"flex-col items-start gap-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex gap-2 font-medium leading-none",children:["6-month average: ",l.toFixed(1)," tickets per month"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 leading-none",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Current month projected:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(d),children:[i.toFixed(0)," tickets (",Math.abs(n).toFixed(1),"% ",o?"above":"below"," average)"]}),(0,r.jsx)(c,{className:"h-4 w-4 ".concat(d)})]}),(0,r.jsxs)("div",{className:"leading-none text-muted-foreground",children:["Total previous 6 months: ",a," tickets"]})]})]})}let ee=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:d("w-full caption-bottom text-sm",s),...a})})});ee.displayName="Table";let et=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:d("[&_tr]:border-b",s),...a})});et.displayName="TableHeader";let es=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:d("[&_tr:last-child]:border-0",s),...a})});es.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let er=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});er.displayName="TableRow";let ea=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});ea.displayName="TableHead";let el=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});function en(e){let{shiftCounts:t}=e,s=Object.values(t).reduce((e,t)=>e+t,0),a=Object.entries(t).sort((e,t)=>{let[,s]=e,[,r]=t;return r-s});return(0,r.jsxs)(u,{children:[(0,r.jsx)(h,{children:(0,r.jsx)(m,{children:"Shift Distribution Details"})}),(0,r.jsx)(f,{children:(0,r.jsxs)(ee,{children:[(0,r.jsx)(et,{children:(0,r.jsxs)(er,{children:[(0,r.jsx)(ea,{children:"Shift"}),(0,r.jsx)(ea,{className:"text-right",children:"Tickets"}),(0,r.jsx)(ea,{className:"text-right",children:"Percentage"})]})}),(0,r.jsx)(es,{children:a.length>0?a.map(e=>{let[t,a]=e;return(0,r.jsxs)(er,{children:[(0,r.jsx)(el,{className:"font-medium",children:t}),(0,r.jsx)(el,{className:"text-right",children:a.toLocaleString()}),(0,r.jsxs)(el,{className:"text-right",children:[(a/s*100).toFixed(1),"%"]})]},t)}):(0,r.jsx)(er,{children:(0,r.jsx)(el,{colSpan:3,className:"text-center text-muted-foreground",children:"No data available"})})})]})})]})}function ei(e){let{monthlyTickets:t,monthlyResolveTimes:s}=e,a=Object.keys(t).sort().slice(-6);return(0,r.jsxs)(u,{children:[(0,r.jsx)(h,{children:(0,r.jsx)(m,{children:"Monthly Breakdown Details"})}),(0,r.jsx)(f,{children:(0,r.jsxs)(ee,{children:[(0,r.jsx)(et,{children:(0,r.jsxs)(er,{children:[(0,r.jsx)(ea,{children:"Month"}),(0,r.jsx)(ea,{className:"text-right",children:"Tickets"}),(0,r.jsx)(ea,{className:"text-right",children:"Avg Resolution Time"})]})}),(0,r.jsx)(es,{children:a.length>0?a.map(e=>{let a=s[e]?s[e].reduce((e,t)=>e+t,0)/s[e].length:0;return(0,r.jsxs)(er,{children:[(0,r.jsx)(el,{className:"font-medium",children:new Date(e+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,r.jsx)(el,{className:"text-right",children:t[e].toLocaleString()}),(0,r.jsxs)(el,{className:"text-right",children:[a.toFixed(1)," hours"]})]},e)}):(0,r.jsx)(er,{children:(0,r.jsx)(el,{colSpan:3,className:"text-center text-muted-foreground",children:"No data available"})})})]})})]})}function eo(e){if(!e||"string"!=typeof e)return!1;let t=new Date(e);return!isNaN(t.getTime())&&t.getFullYear()>1900&&2100>t.getFullYear()}function ec(){let[e,t]=(0,a.useState)(null);return(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold tracking-tight mb-2 bg-red-600 text-white p-4 rounded shadow-lg",children:"Ticket Analysis Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground text-lg",children:"Upload your CSV data to analyze ticket patterns and performance metrics"})]}),(0,r.jsx)(y,{onFileUpload:e=>{console.log("Starting analysis with",e.length,"rows of data");try{let s=function(e){let t=new Date,s=0,r=0,a=0,l=0,n=0,i={},o={},c={},d={},u={},h={},m={},x={},f=[],g=new Date(t.getFullYear(),0,1),j=new Date(t.getFullYear(),t.getMonth(),1),p=new Date(t);p.setMonth(p.getMonth()-6);let v=new Date(t.getFullYear(),t.getMonth()-1,t.getDate()),y=new Date(t.getTime()-7776e6),b=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),N=t.getDate()/b,k=0,w=0;e.forEach(e=>{if(l++,!e.CreateDate||!e.ResolvedDate||!eo(e.CreateDate)||!eo(e.ResolvedDate))return;let t=new Date(e.CreateDate),b=new Date(e.ResolvedDate);if(isNaN(t.getTime())||isNaN(b.getTime()))return;n++;let N=(b.getTime()-t.getTime())/36e5;k+=N,w++;let C=t.toISOString().slice(0,7),D=(function(e){let t=e.getDay(),s=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(s))})(t).toISOString().slice(0,10),S=function(e){let t=e.getDay(),s=e.getHours(),r=100*s+e.getMinutes(),a=430<=r&&r<1630;return[0,1,2].includes(t)?a?"Front Half Days":"Front Half Nights":[4,5,6].includes(t)?a?"Back Half Days":"Back Half Nights":a?"Wednesday Days":"Wednesday Nights"}(t);f.push({createDate:t,resolveDate:b,resolveTime:N,shift:S,monthKey:C,weekKey:D}),i[S]=(i[S]||0)+1,t>=v&&(o[S]=(o[S]||0)+1),t>=y&&(c[S]=(c[S]||0)+1),t>=p&&(d[S]=(d[S]||0)+1),u[C]=(u[C]||0)+1,h[C]||(h[C]=[]),h[C].push(N),m[D]=(m[D]||0)+1,x[D]||(x[D]=[]),x[D].push(N),t>=g&&s++,t>=p&&r++,t>=j&&a++});let C=Object.values(u).reduce((e,t)=>e+t,0)/Object.keys(u).length||0,D=Object.values(m).reduce((e,t)=>e+t,0)/Object.keys(m).length||0,S=k/w||0,T=N>0?a/N:0,F=T-C,R=Object.entries(u).sort((e,t)=>e[0]>t[0]?1:-1).slice(-6).reduce((e,t)=>{let[,s]=t;return e+s},0),_=Object.entries(m).sort((e,t)=>e[0]>t[0]?1:-1).slice(-4).reduce((e,t)=>{let[,s]=t;return e+s},0);return{ytdCount:s,last6MonthsCount:r,last6MonthsAvgResolutionTime:0,last4WeeksCount:0,avgMonthly:C,avgWeekly:D,avgResolutionTime:S,shiftCounts:i,last1MonthShiftCounts:o,last3MonthsShiftCounts:c,last6MonthsShiftCounts:d,monthlyTickets:u,monthlyResolveTimes:h,weeklyTickets:m,weeklyResolveTimes:x,currentMonthCount:a,currentMonthProgress:N,projectedCurrentMonth:T,trendVsAverage:F,trendPercentage:C>0?F/C*100:0,totalProcessedRows:l,totalValidRows:n,processedTickets:f,last6CalendarMonthsCount:R,last4CalendarWeeksCount:_}}(e);console.log("Analysis completed successfully"),console.log("Analysis result:",s),t(s)}catch(e){console.error("Error during analysis:",e),alert("Error analyzing the data. Please check the console for details.")}},hasData:!!e}),e?(0,r.jsxs)("div",{className:"space-y-8 animate-in fade-in-50 duration-500",children:[(0,r.jsx)(C,{ytdTotal:e.ytdCount,monthlyAvg:e.avgMonthly,weeklyAvg:e.avgWeekly,avgResolutionTime:e.avgResolutionTime||0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)(U,{analysisResult:e}),(0,r.jsx)(G,{analysisResult:e})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)(en,{shiftCounts:e.shiftCounts}),(0,r.jsx)(ei,{monthlyTickets:e.monthlyTickets,monthlyResolveTimes:e.monthlyResolveTimes})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{children:["Processed ",e.totalValidRows," valid rows out of ",e.totalProcessedRows," total rows"]}),(0,r.jsxs)("div",{className:"mt-1 font-mono",children:["YTD: ",e.ytdCount," | Last 6 Months: ",e.last6CalendarMonthsCount," | Last 4 Weeks: ",e.last4CalendarWeeksCount]})]})]}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("div",{className:"text-muted-foreground text-lg",children:"Upload a CSV file to begin analyzing your ticket data"})})]})})}el.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:d("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"}},e=>{var t=t=>e(e.s=t);e.O(0,[586,441,684,358],()=>t(1135)),_N_E=e.O()}]);