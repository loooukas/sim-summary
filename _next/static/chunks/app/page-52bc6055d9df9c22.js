(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1135:(e,t,s)=>{Promise.resolve().then(s.bind(s,37391))},37391:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>em});var a=s(95155),r=s(12115),l=s(57434),n=s(53904),i=s(29869),o=s(52596),c=s(39688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});u.displayName="Card";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...r})});h.displayName="CardHeader";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...r})});m.displayName="CardTitle";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",s),...r})});x.displayName="CardDescription";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("p-6 pt-0",s),...r})});f.displayName="CardContent";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...r})});g.displayName="CardFooter";var v=s(54624);let p=(0,s(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...i}=e,o=n?v.DX:"button";return(0,a.jsx)(o,{className:d(p({variant:r,size:l,className:s})),ref:t,...i})});function y(e){let{onFileUpload:t,hasData:s}=e,[o,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),g=(0,r.useCallback)(async e=>{if("text/csv"!==e.type&&!e.name.endsWith(".csv")){alert("Please upload a CSV file");return}h(!0),x(e.name);try{let s=(await e.text()).split("\n").filter(e=>e.trim());if(0===s.length){alert("No data found in the CSV file"),h(!1);return}let a=s[0].split(",").map(e=>e.trim().replace(/"/g,"")),r=[];for(let e=1;e<s.length;e++){let t=s[e].split(",").map(e=>e.trim().replace(/"/g,"")),l={};a.forEach((e,s)=>{l[e]=t[s]||""}),r.push(l)}console.log("CSV parsed successfully:",r.length,"rows"),console.log("Headers found:",a),console.log("Sample row:",r[0]),t(r)}catch(e){console.error("Error processing CSV file:",e),alert("Error processing the CSV file. Please check the file format.")}finally{h(!1)}},[t]),v=(0,r.useCallback)(e=>{e.preventDefault(),c(!1);let t=e.dataTransfer.files[0];t&&g(t)},[g]),p=(0,r.useCallback)(e=>{e.preventDefault(),c(!0)},[]),y=(0,r.useCallback)(e=>{e.preventDefault(),c(!1)},[]),N=(0,r.useCallback)(e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&g(s)},[g]);return s&&!d?(0,a.jsx)(u,{className:"mb-6 transition-all duration-500 ease-in-out transform scale-95",children:(0,a.jsxs)(f,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:m||"CSV File Loaded"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Data analysis complete"})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=document.getElementById("csvFile"))||void 0===e?void 0:e.click()},className:"text-xs",children:[(0,a.jsx)(n.A,{className:"mr-1 h-3 w-3"}),"Replace"]})})]}),(0,a.jsx)("input",{id:"csvFile",type:"file",accept:".csv",className:"hidden",onChange:N})]})}):(0,a.jsx)(u,{className:"mb-8 transition-all duration-500 ease-in-out",children:(0,a.jsx)(f,{className:"p-0",children:(0,a.jsxs)("div",{className:"\n            border-2 border-dashed rounded-lg p-8 text-center transition-all duration-300 cursor-pointer\n            ".concat(o?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50","\n            ").concat(d?"opacity-50 pointer-events-none":"","\n          "),onDrop:v,onDragOver:p,onDragLeave:y,onClick:()=>{var e;return!d&&(null===(e=document.getElementById("csvFile"))||void 0===e?void 0:e.click())},children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[d?(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}):(0,a.jsx)(i.A,{className:"h-12 w-12 text-muted-foreground"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:d?"Processing CSV...":"Upload CSV File"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Drag and drop your ticket data CSV file here, or click to select"})]}),!d&&(0,a.jsxs)(j,{variant:"outline",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Select File"]})]}),(0,a.jsx)("input",{id:"csvFile",type:"file",accept:".csv",className:"hidden",onChange:N})]})})})}j.displayName="Button";var N=s(33109),b=s(69074),k=s(72713),w=s(14186);function D(e){let{ytdTotal:t,monthlyAvg:s,weeklyAvg:r,avgResolutionTime:l}=e,n=[{title:"YTD Total",value:t.toLocaleString(),icon:N.A,color:"text-blue-600"},{title:"Monthly Average",value:s.toFixed(1),icon:b.A,color:"text-green-600"},{title:"Weekly Average",value:r.toFixed(1),icon:k.A,color:"text-purple-600"},{title:"Avg Resolution Time",value:"".concat(l.toFixed(1),"h"),icon:w.A,color:"text-orange-600"}];return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:n.map((e,t)=>{let s=e.icon;return(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m,{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,a.jsx)(s,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(e.color),children:e.value})})]},t)})})}var C=s(8782),S=s(34e3),F=s(60379),T=s(83540),R=s(94517),H=s(24026);let M={light:"",dark:".dark"},_=r.createContext(null);function A(){let e=r.useContext(_);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let B=r.forwardRef((e,t)=>{let{id:s,className:l,children:n,config:i,...o}=e,c=r.useId(),u="chart-".concat(s||c.replace(/:/g,""));return(0,a.jsx)(_.Provider,{value:{config:i},children:(0,a.jsxs)("div",{"data-chart":u,ref:t,className:d("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,a.jsx)(W,{id:u,config:i}),(0,a.jsx)(T.u,{children:n})]})})});B.displayName="Chart";let W=e=>{let{id:t,config:s}=e,r=Object.entries(s).filter(e=>{let[t,s]=e;return s.theme||s.color});return r.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(M).map(e=>{let[s,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(r.map(e=>{var t;let[a,r]=e,l=(null===(t=r.theme)||void 0===t?void 0:t[s])||r.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},O=R.m,L=r.forwardRef((e,t)=>{let{active:s,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:u,labelFormatter:h,labelClassName:m,formatter:x,color:f,nameKey:g,labelKey:v}=e,{config:p}=A(),j=r.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[t]=l,s="".concat(v||t.dataKey||t.name||"value"),r=P(p,t,s),n=v||"string"!=typeof u?null==r?void 0:r.label:(null===(e=p[u])||void 0===e?void 0:e.label)||u;return h?(0,a.jsx)("div",{className:d("font-medium",m),children:h(n,l)}):n?(0,a.jsx)("div",{className:d("font-medium",m),children:n}):null},[u,h,l,o,m,p,v]);if(!s||!(null==l?void 0:l.length))return null;let y=1===l.length&&"dot"!==i;return(0,a.jsxs)("div",{ref:t,className:d("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[y?null:j,(0,a.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let s="".concat(g||e.name||e.dataKey||"value"),r=P(p,e,s),l=f||e.payload.fill||e.color;return(0,a.jsx)("div",{className:d("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==r?void 0:r.icon)?(0,a.jsx)(r.icon,{}):!c&&(0,a.jsx)("div",{className:d("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":y&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:d("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[y?j:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function P(e,t,s){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=s;return s in t&&"string"==typeof t[s]?r=t[s]:a&&s in a&&"string"==typeof a[s]&&(r=a[s]),r in e?e[r]:e[s]}L.displayName="ChartTooltip",H.s,r.forwardRef((e,t)=>{let{className:s,hideIcon:r=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=A();return(null==l?void 0:l.length)?(0,a.jsx)("div",{ref:t,className:d("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",s),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),s=P(o,e,t);return(0,a.jsxs)("div",{className:d("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!r?(0,a.jsx)(s.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend";let E={"Front Half Days":"Front Half Days","Front Half Nights":"Front Half Nights","Back Half Days":"Back Half Days","Back Half Nights":"Back Half Nights","Wednesday Days":"Wednesday Days","Wednesday Nights":"Wednesday Nights"},V={"Front Half Days":"hsl(var(--chart-1))","Front Half Nights":"hsl(var(--chart-2))","Back Half Days":"hsl(var(--chart-3))","Back Half Nights":"hsl(var(--chart-4))","Wednesday Days":"hsl(var(--chart-5))","Wednesday Nights":"hsl(220 70% 50%)"},Y={...Object.fromEntries(Object.keys(E).map(e=>[e,{label:E[e],color:V[e]}])),tickets:{label:"Tickets"}};function K(e){let{analysisResult:t}=e,[s,l]=r.useState("6mo"),n=r.useMemo(()=>{let e=function(e,t){switch(e){case"1mo":return t.last1MonthShiftCounts;case"3mo":return t.last3MonthsShiftCounts;case"6mo":return t.last6MonthsShiftCounts;default:return t.shiftCounts}}(s,t),a=Object.keys(E).map(t=>{var s;return{shift:t,tickets:null!==(s=null==e?void 0:e[t])&&void 0!==s?s:0,fill:V[t]}}).filter(e=>e.tickets>0),r=a.reduce((e,t)=>e+t.tickets,0);return{total:r,dataset:a.map(e=>({...e,percentage:r?e.tickets/r*100:0}))}},[s,t]);return 0===n.total?(0,a.jsxs)(u,{className:"flex flex-col",children:[(0,a.jsxs)(h,{className:"items-center pb-0",children:[(0,a.jsx)(m,{children:"Shift Distribution"}),(0,a.jsx)(x,{children:"Upload data to see shift distribution"})]}),(0,a.jsx)(f,{className:"flex-1 pb-0",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-[350px] text-muted-foreground",children:"No data available"})})]}):(0,a.jsxs)(u,{className:"flex flex-col",children:[(0,a.jsxs)(h,{className:"items-center pb-0",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between mb-2",children:[(0,a.jsx)(m,{children:"Shift Distribution"}),(0,a.jsx)("div",{className:"flex gap-1",children:["1mo","3mo","6mo","all"].map(e=>(0,a.jsx)(j,{variant:s===e?"default":"outline",size:"sm",className:"px-2 py-1 text-xs",onClick:()=>l(e),children:"all"===e?"All":e},e))})]}),(0,a.jsxs)(x,{children:["Ticket distribution –"," ",{"1mo":"Previous full month","3mo":"Previous 3 months","6mo":"Previous 6 months",all:"All time"}[s]]})]}),(0,a.jsx)(f,{className:"flex-1 pb-0",children:(0,a.jsx)(B,{config:Y,className:"mx-auto aspect-square max-h-[350px]",children:(0,a.jsxs)(C.r,{children:[(0,a.jsx)(O,{cursor:!1,content:e=>{let{active:t,payload:s}=e;if(t&&(null==s?void 0:s.length)){let e=s[0].payload;return(0,a.jsx)("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:e.fill}}),(0,a.jsx)("span",{className:"font-medium",children:e.shift})]}),(0,a.jsxs)("div",{className:"grid text-sm gap-1",children:[(0,a.jsxs)("div",{children:["Tickets: ",e.tickets.toLocaleString()]}),(0,a.jsxs)("div",{children:["Percentage: ",e.percentage.toFixed(1),"%"]})]})]})})}return null}}),(0,a.jsx)(S.F,{data:n.dataset,dataKey:"tickets",nameKey:"shift",innerRadius:80,outerRadius:140,strokeWidth:2,children:(0,a.jsx)(F.J,{content:e=>{let{viewBox:t}=e;return t&&"cx"in t&&"cy"in t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",className:"fill-foreground text-3xl font-bold",children:n.total.toLocaleString()}),(0,a.jsx)("text",{x:t.cx,y:(t.cy||0)+24,textAnchor:"middle",dominantBaseline:"middle",className:"fill-muted-foreground",children:"Total Tickets"})]}):null}})})]})})})]})}var U=s(68500),z=s(3401),I=s(94754),G=s(96025),$=s(16238),q=s(83394),J=s(36079);let Q={tickets:{label:"Tickets",color:"hsl(var(--chart-1))"}};function X(e){let{analysisResult:t}=e,s=(function(e){let t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),a=[];for(let e=5;e>=0;e--){let t=new Date(s.getFullYear(),s.getMonth()-e,1);a.push(t.toISOString().slice(0,7))}return a})(Object.keys(t.monthlyTickets)).map(e=>{var s;return{month:new Date("".concat(e,"-01")).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),tickets:null!==(s=t.monthlyTickets[e])&&void 0!==s?s:0}});if(0===s.length)return(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(m,{children:"Monthly Breakdown"}),(0,a.jsx)(x,{children:"Upload data to see monthly trends"})]}),(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-[250px] text-muted-foreground",children:"No data available"})})]});let r=t.last6MonthsCount,l=t.avgMonthly,n=t.trendPercentage,i=t.projectedCurrentMonth,o=n>0,c=o?N.A:U.A,d=o?"text-red-600":"text-green-600";return(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(m,{children:"Monthly Breakdown"}),(0,a.jsx)(x,{children:"Previous 6 months ticket volume"})]}),(0,a.jsx)(f,{children:(0,a.jsx)(B,{config:Q,children:(0,a.jsxs)(z.E,{accessibilityLayer:!0,data:s,margin:{left:12,right:12,top:20},children:[(0,a.jsx)(I.d,{vertical:!1}),(0,a.jsx)(G.W,{dataKey:"month",tickLine:!1,tickMargin:10,axisLine:!1}),(0,a.jsx)($.h,{}),(0,a.jsx)(O,{content:(0,a.jsx)(L,{}),formatter:(e,t)=>["".concat(e," Tickets"),""]}),(0,a.jsx)(q.y,{dataKey:"tickets",fill:"var(--color-tickets)",radius:[4,4,0,0],children:(0,a.jsx)(J.Z,{dataKey:"tickets",position:"top",className:"fill-foreground text-xs font-medium"})})]})})}),(0,a.jsxs)(g,{className:"flex-col items-start gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-2 font-medium leading-none",children:["6-month average: ",l.toFixed(1)," tickets per month"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 leading-none",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Current month projected:"}),(0,a.jsxs)("span",{className:"font-medium ".concat(d),children:[i.toFixed(0)," tickets (",Math.abs(n).toFixed(1),"% ",o?"above":"below"," average)"]}),(0,a.jsx)(c,{className:"h-4 w-4 ".concat(d)})]}),(0,a.jsxs)("div",{className:"leading-none text-muted-foreground",children:["Total previous 6 months: ",r," tickets"]})]})]})}let Z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:d("w-full caption-bottom text-sm",s),...r})})});Z.displayName="Table";let ee=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:d("[&_tr]:border-b",s),...r})});ee.displayName="TableHeader";let et=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:d("[&_tr:last-child]:border-0",s),...r})});et.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let es=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});es.displayName="TableRow";let ea=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});ea.displayName="TableHead";let er=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});er.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:d("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";let el=["Front Half Days","Front Half Nights","Back Half Days","Back Half Nights","Wednesday Days","Wednesday Nights"];function en(e){let{shiftCounts:t}=e,s=Object.values(t).reduce((e,t)=>e+t,0),r=el.map(e=>{var s;return[e,null!==(s=t[e])&&void 0!==s?s:0]});return(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(m,{children:"Shift Distribution Details"})}),(0,a.jsx)(f,{children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(es,{children:[(0,a.jsx)(ea,{children:"Shift"}),(0,a.jsx)(ea,{className:"text-right",children:"Tickets"}),(0,a.jsx)(ea,{className:"text-right",children:"Percentage"})]})}),(0,a.jsx)(et,{children:r.length>0?r.map(e=>{let[t,r]=e;return(0,a.jsxs)(es,{children:[(0,a.jsx)(er,{className:"font-medium",children:t}),(0,a.jsx)(er,{className:"text-right",children:r.toLocaleString()}),(0,a.jsxs)(er,{className:"text-right",children:[(r/s*100).toFixed(1),"%"]})]},t)}):(0,a.jsx)(es,{children:(0,a.jsx)(er,{colSpan:3,className:"text-center text-muted-foreground",children:"No data available"})})})]})})]})}var ei=s(40167),eo=s(35462);function ec(e){let{monthlyTickets:t,monthlyResolveTimes:s}=e,r=new Date,l=new Date(r.getFullYear(),r.getMonth(),1),n=Array.from({length:6}).map((e,t)=>(0,ei.GP)((0,eo.a)(l,5-t),"yyyy-MM"));return(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(m,{children:"Monthly Breakdown Details"})}),(0,a.jsx)(f,{children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(es,{children:[(0,a.jsx)(ea,{children:"Month"}),(0,a.jsx)(ea,{className:"text-right",children:"Tickets"}),(0,a.jsx)(ea,{className:"text-right",children:"Avg Resolution Time"})]})}),(0,a.jsx)(et,{children:n.map(e=>{var r,l;let n=null!==(r=t[e])&&void 0!==r?r:0,i=null!==(l=s[e])&&void 0!==l?l:[],o=i.length?i.reduce((e,t)=>e+t,0)/i.length:null;return(0,a.jsxs)(es,{children:[(0,a.jsx)(er,{className:"font-medium",children:new Date(e+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,a.jsx)(er,{className:"text-right",children:n.toLocaleString()}),(0,a.jsx)(er,{className:"text-right",children:null!==o?"".concat(o.toFixed(1)," hours"):"–"})]},e)})})]})})]})}function ed(e){let t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/u.exec(e.trim());if(!t)return null;let[,s,a,r,l,n,i]=t.map(Number);return new Date(s,a-1,r,l,n,i)}let eu=["Front Half Days","Front Half Nights","Back Half Days","Back Half Nights","Wednesday Days","Wednesday Nights"];function eh(){return{"Front Half Days":0,"Front Half Nights":0,"Back Half Days":0,"Back Half Nights":0,"Wednesday Days":0,"Wednesday Nights":0}}function em(){let[e,t]=(0,r.useState)(null);return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold tracking-tight mb-2",children:"Ticket Analysis Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground text-lg",children:"Upload your CSV data to analyze ticket patterns and performance metrics"})]}),(0,a.jsx)(y,{onFileUpload:e=>{console.log("Starting analysis with",e.length,"rows of data");try{let s=function(e){let t=new Date,s=0,a=0,r=0,l=0,n=0,i=eh(),o=eh(),c=eh(),d=eh(),u={},h={},m={},x={},f=[],g=new Date(t.getFullYear(),0,1),v=new Date(t.getFullYear(),t.getMonth(),1),p=new Date(t);p.setMonth(p.getMonth()-6);let j=new Date(t.getFullYear(),t.getMonth()-1,t.getDate()),y=new Date(t.getTime()-7776e6),N=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),b=t.getDate()/N,k=0,w=0;e.forEach(e=>{var t,N;if(l++,!e.CreateDate||!e.ResolvedDate||!ed(e.CreateDate)||!ed(e.ResolvedDate))return;let b=null!==(t=ed(e.CreateDate))&&void 0!==t?t:new Date(NaN),D=null!==(N=ed(e.ResolvedDate))&&void 0!==N?N:new Date(NaN);if(isNaN(b.getTime())||isNaN(D.getTime()))return;n++;let C=(D.getTime()-b.getTime())/36e5;k+=C,w++;let S=b.toISOString().slice(0,7),F=(function(e){let t=new Date(e),s=t.getDay(),a=t.getDate()-s+(0===s?-6:1);return t.setDate(a),t.setHours(0,0,0,0),t})(b).toISOString().slice(0,10),T=function(e){let t=e.getDay(),s=60*e.getHours()+e.getMinutes(),a=s>=270&&s<990;return[0,1,2].includes(t)?a?"Front Half Days":"Front Half Nights":[4,5,6].includes(t)?a?"Back Half Days":"Back Half Nights":a?"Wednesday Days":"Wednesday Nights"}(b);f.push({createDate:b,resolveDate:D,resolveTime:C,shift:T,monthKey:S,weekKey:F}),l<=30&&console.log("[DEBUG] ".concat(e.CreateDate,"  →  ").concat(T)),i[T]=(i[T]||0)+1,b>=j&&(o[T]=(o[T]||0)+1),b>=y&&(c[T]=(c[T]||0)+1),b>=p&&(d[T]=(d[T]||0)+1),u[S]=(u[S]||0)+1,h[S]||(h[S]=[]),h[S].push(C),m[F]=(m[F]||0)+1,x[F]||(x[F]=[]),x[F].push(C),b>=g&&s++,b>=p&&a++,b>=v&&r++});let D=Object.values(u).reduce((e,t)=>e+t,0)/Object.keys(u).length||0,C=Object.values(m).reduce((e,t)=>e+t,0)/Object.keys(m).length||0,S=k/w||0,F=b>0?r/b:0,T=F-D;eu.forEach(e=>{i[e]=i[e]||0,o[e]=o[e]||0,c[e]=c[e]||0,d[e]=d[e]||0});let R=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,r=new Date(s.getFullYear(),s.getMonth()-1,1),l=[];for(let s=a-1;s>=0;s--){var n,i;let a=new Date(r.getFullYear(),r.getMonth()-s,1),o=a.toISOString().slice(0,7),c=a.toLocaleString("default",{month:"short",year:"numeric"}),d=null!==(n=e[o])&&void 0!==n?n:0,u=null!==(i=t[o])&&void 0!==i?i:[],h=u.length?u.reduce((e,t)=>e+t,0)/u.length:0;l.push({monthStart:"".concat(o,"-01"),label:c,totalTickets:d,avgResolutionHrs:+h.toFixed(2)})}return l}(u,h,t,6),H=R.reduce((e,t)=>e+t.avgResolutionHrs,0)/(R.length||1),M=Object.entries(u).sort((e,t)=>e[0]>t[0]?1:-1).slice(-6).reduce((e,t)=>{let[,s]=t;return e+s},0),_=Object.entries(m).sort((e,t)=>e[0]>t[0]?1:-1).slice(-4).reduce((e,t)=>{let[,s]=t;return e+s},0);return{ytdCount:s,last6MonthsCount:a,last6MonthsAvgResolutionTime:H,last4WeeksCount:_,avgMonthly:D,avgWeekly:C,avgResolutionTime:S,shiftCounts:i,last1MonthShiftCounts:o,last3MonthsShiftCounts:c,last6MonthsShiftCounts:d,monthlyTickets:u,monthlyResolveTimes:h,monthlyStats:R,monthlyLastSix:R.map(e=>({month:e.label,tickets:e.totalTickets,avgResolve:e.avgResolutionHrs})),weeklyTickets:m,weeklyResolveTimes:x,currentMonthCount:r,currentMonthProgress:b,projectedCurrentMonth:F,trendVsAverage:T,trendPercentage:D>0?T/D*100:0,totalProcessedRows:l,totalValidRows:n,processedTickets:f,last6CalendarMonthsCount:M,last4CalendarWeeksCount:_}}(e);console.log("Analysis completed successfully"),console.log("Analysis result:",s),t(s)}catch(e){console.error("Error during analysis:",e),alert("Error analyzing the data. Please check the console for details.")}},hasData:!!e}),e?(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in-50 duration-500",children:[(0,a.jsx)(D,{ytdTotal:e.ytdCount,monthlyAvg:e.avgMonthly,weeklyAvg:e.avgWeekly,avgResolutionTime:e.avgResolutionTime||0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(K,{analysisResult:e}),(0,a.jsx)(X,{analysisResult:e})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(en,{shiftCounts:e.shiftCounts}),(0,a.jsx)(ec,{monthlyTickets:e.monthlyTickets,monthlyResolveTimes:e.monthlyResolveTimes})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{children:["Processed ",e.totalValidRows," valid rows out of ",e.totalProcessedRows," total rows"]}),(0,a.jsxs)("div",{className:"mt-1 font-mono",children:["YTD: ",e.ytdCount," | Last 6 Months: ",e.last6CalendarMonthsCount," | Last 4 Weeks: ",e.last4CalendarWeeksCount]})]})]}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"text-muted-foreground text-lg",children:"Upload a CSV file to begin analyzing your ticket data"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[91,441,684,358],()=>t(1135)),_N_E=e.O()}]);